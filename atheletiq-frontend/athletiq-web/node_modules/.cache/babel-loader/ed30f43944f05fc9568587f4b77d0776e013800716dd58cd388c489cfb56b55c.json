{"ast":null,"code":"var _jsxFileName = \"E:\\\\Athletiq Project\\\\atheletiq-frontend\\\\athletiq-web\\\\src\\\\components\\\\OcrUpload.js\",\n  _s = $RefreshSig$();\n// src/components/OcrUpload.js\nimport React, { useState } from 'react';\nimport { uploadBirthCertificate } from '../api/ocrApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function OcrUpload({\n  onExtracted\n}) {\n  _s();\n  const [file, setFile] = useState(null);\n  const [preview, setPreview] = useState('');\n  const [extracting, setExtracting] = useState(false);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState('');\n  const handleFileChange = e => {\n    const f = e.target.files[0];\n    setFile(f);\n    setPreview(f ? URL.createObjectURL(f) : '');\n    setResult(null);\n    setError('');\n  };\n  const handleExtract = async () => {\n    if (!file) return setError('Choose an image first');\n    setExtracting(true);\n    setError('');\n    try {\n      // Get token from localStorage (adjust as needed)\n      const token = localStorage.getItem('token');\n      const data = await uploadBirthCertificate(file, token);\n      setResult(data.extracted || data); // backend returns .extracted\n      onExtracted && onExtracted(data.extracted || data);\n    } catch (e) {\n      var _e$response, _e$response$data;\n      setError('OCR failed: ' + ((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || e.message));\n    }\n    setExtracting(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 400,\n      margin: '0 auto',\n      padding: 16,\n      border: '1px solid #eee',\n      borderRadius: 8\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Birth Certificate OCR\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), preview && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: preview,\n        alt: \"Preview\",\n        style: {\n          maxWidth: 200,\n          marginTop: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleExtract,\n      disabled: extracting || !file,\n      style: {\n        marginTop: 12\n      },\n      children: extracting ? 'Extracting...' : 'Extract Data'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        marginTop: 8\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Extracted Data:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          background: '#fafafa',\n          padding: 8\n        },\n        children: JSON.stringify(result, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n_s(OcrUpload, \"j1QbjxvwXOQ/OjuGbHPdBY3AAlg=\");\n_c = OcrUpload;\nvar _c;\n$RefreshReg$(_c, \"OcrUpload\");","map":{"version":3,"names":["React","useState","uploadBirthCertificate","jsxDEV","_jsxDEV","OcrUpload","onExtracted","_s","file","setFile","preview","setPreview","extracting","setExtracting","result","setResult","error","setError","handleFileChange","e","f","target","files","URL","createObjectURL","handleExtract","token","localStorage","getItem","data","extracted","_e$response","_e$response$data","response","message","style","maxWidth","margin","padding","border","borderRadius","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","src","alt","marginTop","onClick","disabled","color","background","JSON","stringify","_c","$RefreshReg$"],"sources":["E:/Athletiq Project/atheletiq-frontend/athletiq-web/src/components/OcrUpload.js"],"sourcesContent":["// src/components/OcrUpload.js\r\nimport React, { useState } from 'react';\r\nimport { uploadBirthCertificate } from '../api/ocrApi';\r\n\r\nexport default function OcrUpload({ onExtracted }) {\r\n  const [file, setFile] = useState(null);\r\n  const [preview, setPreview] = useState('');\r\n  const [extracting, setExtracting] = useState(false);\r\n  const [result, setResult] = useState(null);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleFileChange = e => {\r\n    const f = e.target.files[0];\r\n    setFile(f);\r\n    setPreview(f ? URL.createObjectURL(f) : '');\r\n    setResult(null);\r\n    setError('');\r\n  };\r\n\r\n  const handleExtract = async () => {\r\n    if (!file) return setError('Choose an image first');\r\n    setExtracting(true); setError('');\r\n    try {\r\n      // Get token from localStorage (adjust as needed)\r\n      const token = localStorage.getItem('token');\r\n      const data = await uploadBirthCertificate(file, token);\r\n      setResult(data.extracted || data); // backend returns .extracted\r\n      onExtracted && onExtracted(data.extracted || data);\r\n    } catch (e) {\r\n      setError('OCR failed: ' + (e?.response?.data?.message || e.message));\r\n    }\r\n    setExtracting(false);\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 400, margin: '0 auto', padding: 16, border: '1px solid #eee', borderRadius: 8 }}>\r\n      <h2>Birth Certificate OCR</h2>\r\n      <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\r\n      {preview && (\r\n        <div>\r\n          <img src={preview} alt=\"Preview\" style={{ maxWidth: 200, marginTop: 10 }} />\r\n        </div>\r\n      )}\r\n      <button onClick={handleExtract} disabled={extracting || !file} style={{ marginTop: 12 }}>\r\n        {extracting ? 'Extracting...' : 'Extract Data'}\r\n      </button>\r\n      {error && <div style={{ color: 'red', marginTop: 8 }}>{error}</div>}\r\n      {result && (\r\n        <div style={{ marginTop: 16 }}>\r\n          <strong>Extracted Data:</strong>\r\n          <pre style={{ background: '#fafafa', padding: 8 }}>\r\n            {JSON.stringify(result, null, 2)}\r\n          </pre>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}